import{u as y,r as c,W as f,a as r,j as e,e as a,d as h,F as u}from"./app.fb31f04e.js";import{u as b}from"./useTypedPage.c1d98290.js";import{A as x}from"./AppLayout.1efc3e4d.js";import{H as _}from"./HomeIcon.838d6b70.js";import"./transition.53ec94d6.js";import"./moment.9709ab41.js";function E({exam:i,question:o,instance:N,instanceAnswers:l}){const d=y();b();const[m,C]=c.exports.useState(),[p,g]=c.exports.useState(!1);c.exports.useState();const s=()=>g(!p),t=f({answer_id:m,question_id:o.data[0].id,url:"",page:"",value:"",instance_answer_id:null}),v=()=>{t.post(d("exam.finish"),{errorBag:"finishExam",preserveScroll:!0})};return c.exports.useEffect(()=>{t.data.instance_answer_id=l[0]!=null?l[0].id:null,t.data.value=l[0]!=null?l[0].value:null},[]),r(x,{title:`${i.name}`,children:[e("div",{className:"py-12",children:r("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[r(a.Breadcrumbs,{children:[e(h,{href:"/dashboard",className:"opacity-60",children:e(_,{className:"h-4 w-4"})}),e(h,{href:"/exams/student",className:"opacity-60",children:e("span",{children:"Exams"})}),e(h,{href:`/exam/student/${i.id}`,className:"opacity-60",children:e("span",{children:i.id})}),e("span",{children:"Current"})]}),r(a.Typography,{variant:"h2",color:"blue-gray",children:[i.name," - (",i.attempts," Attempts)"," "]}),r(a.Typography,{variant:"h6",color:"blue-gray",className:"my-2 flex items-center gap-2",children:[e("img",{className:"h-10 w-10 rounded-full object-cover",src:i.team.owner.profile_photo_url,alt:i.team.owner.name}),i.team.owner.name," - ",i.team.name]}),e("br",{}),e(a.Button,{color:"green",className:"flex items-center gap-3",onClick:s,children:"Finish Exam"}),e("br",{}),r(a.Card,{children:[r(a.CardBody,{children:[r("div",{className:"flex items-start justify-between mb-5",children:[r(a.Typography,{variant:"h4",color:"black",children:["Question ",o.current_page]}),l[0]!=null||l[0]!=null?e(a.Typography,{variant:"h4",color:"green",className:"font-bold",children:"Answered"}):e(a.Typography,{variant:"h4",color:"gray",className:"font-bold",children:"Unanswered"})]}),e(a.Typography,{variant:"h3",color:"black",className:"mb-5",children:o.data[0].value}),e(a.Card,{shadow:!1,className:"border-2 border-gray-500 p-2",children:r(a.CardBody,{children:[o.data[0].answers.map(n=>e(u,{children:o.data[0].type==="Multiple Choice"&&r(u,{children:[e(a.Radio,{crossOrigin:void 0,name:"instanceAnswer",defaultChecked:l[0]!=null?l[0].answer_id==n.id:!1,label:e(a.Typography,{variant:"lead",className:"font-medium",children:n.value}),className:"block",onChange:()=>{t.data.answer_id=n.id,t.data.question_id=n.question.id,t.post(d("instanceAnswer.store"),{errorBag:"submitAnswer",preserveScroll:!0})}},n.id),e("br",{})]})})),o.data[0].type==="Written"&&e(a.Textarea,{label:"Answer",value:l[0]!=null?l[0].value:"",onChange:n=>{t.data.value=n.currentTarget.value},children:l[0]!=null?l[0].value:""})]})})]}),r(a.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[o.prev_page_url?e(a.Button,{variant:"outlined",size:"sm",onClick:()=>{t.data.url=o.prev_page_url,t.post(d("instanceAnswer.store"),{errorBag:"submitAnswer",preserveScroll:!0})},children:"Previous"}):e("span",{}),o.next_page_url&&e(a.Button,{variant:"outlined",size:"sm",onClick:()=>{t.data.url=o.next_page_url,t.post(d("instanceAnswer.store"),{errorBag:"submitAnswer",preserveScroll:!0})},children:"Next"})]})]})]})}),r(a.Dialog,{open:p,handler:s,children:[e(a.DialogHeader,{children:"Finish Exam"}),e(a.DialogBody,{children:e(a.Typography,{variant:"h3",color:"red",children:"Are you sure? You cannot retake this exam if you exhausted all attempts!"})}),r(a.DialogFooter,{children:[e(a.Button,{variant:"text",onClick:s,className:"mr-1",children:e("span",{onClick:s,children:"Cancel"})}),e(a.Button,{variant:"gradient",color:"red",onClick:v,children:e("span",{children:"Confirm"})})]})]})]})}export{E as default};
